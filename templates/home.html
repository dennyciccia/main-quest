{% extends "base.html" %}

{% load static %}

{% block title %} {{ title }} {% endblock %}

{% block content %}
    
    <h3>Videogiochi pi√π popolari</h3>
    <ul>
    {% for p in popolari %}
        <li><a href="{% url "pagina_negozio" p.pk %}">{{ p.titolo }}</a></li>
    {% endfor %}
    </ul>
    
    <h3>Videogiochi usciti di recente</h3>
    <ul>
    {% for r in recenti %}
        <li><a href="{% url "pagina_negozio" r.pk %}">{{ r.titolo }}</a></li>
    {% endfor %}
    </ul>

    <!-- parte del messaggio di conferma avvenuta o non avvenuta disconnessione-->
    {% if messages %}
        <div id="message-container">
            {% for message in messages %}
                <div class="message {{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}

    <script>
        // chiama la funzione quando viene caricato il contenuto del DOM
        document.addEventListener("DOMContentLoaded", function() {
            const messageContainer = document.getElementById('message-container');
            if (messageContainer) {
                // Mostra il message-container come popup
                alert(messageContainer.innerText);
            }
        });
    </script>
    
{% endblock %}