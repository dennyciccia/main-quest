{% extends "base.html" %}

{% load static %}

{% block title %} {{ prodotto.titolo }} {% endblock %}

{% block content %}
    
    <h2>{{ prodotto.titolo }}</h2>
    
    <p>{{ prodotto.descrizione }}</p>
    
    <p>Genere: {{ prodotto.genere }}</p>
    
    {% for img in prodotto.immagini.all %}
        <img src="{% static img.img %}" alt="{{ img.testo_alternativo }}" width="247" height="192">
    {% endfor %}
    
    <p>Data di rilascio: {{ prodotto.data_rilascio }}</p>
    <p>Editore: <a href="{% url "profilo_venditore" prodotto.venditore.pk %}">{{ prodotto.venditore.nome }}</a></p>
    <p>Sviluppatore: <a href="{% url "profilo_venditore" prodotto.venditore.pk %}">{{ prodotto.venditore.nome }}</a></p>
    
    <p>Prezzo: {{ prodotto.prezzo }} <button>Acquista</button></p>
    
    <p>Requisiti: {{ prodotto.requisiti }}</p>
    
    <h3>Domande</h3>
    {% for d in prodotto.domande.all %}
        <p><strong><a href="{% url "profilo_acquirente" d.utente.pk %}">{{ d.utente.nome}}</a>: {{ d.testo }}</strong></p>
        {% if d.risposta != "" %}
            <p><a href="{% url "profilo_acquirente" d.utente_risposta.pk %}">{{ d.utente_risposta.nome }}</a>: {{ d.risposta }}</p>
        {% elif user.is_authenticated %}
            <button>Rispondi</button>
        {% endif %}
    {% endfor %}
    
    <h3>Recensioni</h3>
    {% for r in prodotto.recensioni.all %}
        <p><strong>Utente: <a href="{% url "profilo_acquirente" r.utente.pk %}">{{ r.utente.nome }}</a>, Voto: {{ r.voto }}</strong></p>
        <p>Pubblicata il {{ r.data_pubblicazione }}</p>
        <p>{{ r.testo }}</p>
    {% endfor %}

    {% if next %}
        <p><a href="{{ next }}?terms={{ terms }}">Torna ai risultati della ricerca</a></p>
    {% endif %}
    
    <p><a onclick="history.back()">Pagina precedente</a></p>
    
    {% include "footer.html" %}

{% endblock %}